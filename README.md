# Market Analytics

## Описание

Сервис для парсинга товаров и анализа отзывов с маркетплейсов (Ozon, Wildberries, Яндекс.Маркет, GoldApple) с использованием нейросетей для анализа отзывов и формирования краткой выжимки и оценки качества товара.

---

## Архитектура
- **API Gateway** (FastAPI): маршрутизация запросов, агрегация данных с парсеров.
- **Парсеры** (Ozon, Wildberries, Яндекс.Маркет, GoldApple): асинхронный Playwright, сбор фото, рейтинга, цены, отзывов.
- **Модуль анализа отзывов**: HuggingFace Transformers (RuBERT, ruGPT3).
- **Frontend**: React-интерфейс для поиска и анализа товаров.
- **Docker**: каждый сервис в отдельном контейнере, docker-compose для оркестрации.

---

## Формат ответа API

```json
[
  {
    "name": "Товар",
    "photo": "https://...",
    "rating": 4.8,
    "price": 1990.0,
    "reviews": [
      {"author": "Иван", "text": "Отличный!", "rating": 5, "date": "2024-06-01"}
    ],
    "url": "https://..."
  }
]
```

- Все поля обязательны для каждого товара.
- Для GoldApple отзывы могут быть пустым списком.

---

## Быстрая разработка и ускорение сборки

- **Локальная разработка:**
  - Используйте `venv` и запускайте сервисы напрямую (без Docker) для быстрой отладки.
  - Для фронта используйте `npm start` (hot-reload, мгновенный ререндер).
- **Docker:**
  - Копируйте `requirements.txt` ДО кода в Dockerfile, чтобы использовать кэш pip install.
  - Используйте общий базовый образ с уже установленным Playwright и браузерами.
  - Не пересобирайте контейнеры без необходимости (используйте `docker-compose up --build` только при изменении зависимостей).
  - Для разработки не используйте Docker, если не требуется изоляция.

---

## Пример запуска без Docker

```bash
cd parsers/ozon
uvicorn main:app --reload --port 8001
# Аналогично для других парсеров
```

---

## Пример запроса к API

```bash
curl -X POST "http://localhost:8000/api/parse" -H "Content-Type: application/json" -d '{"query": "iphone"}'
```

---

## Рекомендации по фронту
- Используйте ключи `photo`, `rating`, `price`, `reviews`, `url` для отображения карточки товара.
- Добавьте индикатор загрузки и обработку ошибок.
- Для быстрой разработки используйте hot-reload (`npm start`).

---

## Лицензия
MIT 
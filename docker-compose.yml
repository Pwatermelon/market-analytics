services:
  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile
    ports:
      - "3000:3000"
    environment:
      - REACT_APP_API_URL=http://localhost:8000
    depends_on:
      - api-gateway

  api-gateway:
    build:
      context: .
      dockerfile: api-gateway/Dockerfile
    ports:
      - "8000:8000"
    environment:
      - PYTHONUNBUFFERED=1
      - LOG_LEVEL=INFO
    dns:
      - 8.8.8.8
      - 8.8.4.4

  ozon-parser:
    build:
      context: ./parsers
      dockerfile: ozon/Dockerfile
    ports:
      - "8001:8001"
    dns:
      - 8.8.8.8
      - 8.8.4.4

  wildberries-parser:
    build:
      context: ./parsers
      dockerfile: wildberries/Dockerfile
    ports:
      - "8002:8002"
    dns:
      - 8.8.8.8
      - 8.8.4.4

  goldapple-parser:
    build:
      context: ./parsers
      dockerfile: goldapple/Dockerfile
    ports:
      - "8003:8003"
    dns:
      - 8.8.8.8
      - 8.8.4.4

  yandexmarket-parser:
    build:
      context: ./parsers
      dockerfile: yandexmarket/Dockerfile
    ports:
      - "8004:8004"
    dns:
      - 8.8.8.8
      - 8.8.4.4 
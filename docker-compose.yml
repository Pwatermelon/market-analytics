version: '3.8'

services:
  api-gateway:
    build: ./api-gateway
    ports:
      - "8000:8000"
    depends_on:
      - ozon-parser
      - wildberries-parser
      - goldapple-parser
      - yandexmarket-parser
    environment:
      - OZON_PARSER_URL=http://ozon-parser:8001
      - WILDBERRIES_PARSER_URL=http://wildberries-parser:8002
      - GOLDAPPLE_PARSER_URL=http://goldapple-parser:8003
      - YANDEXMARKET_PARSER_URL=http://yandexmarket-parser:8004

  ozon-parser:
    build:
      context: ./parsers
      dockerfile: ozon/Dockerfile
    ports:
      - "8001:8001"

  wildberries-parser:
    build:
      context: ./parsers
      dockerfile: wildberries/Dockerfile
    ports:
      - "8002:8002"

  goldapple-parser:
    build:
      context: ./parsers
      dockerfile: goldapple/Dockerfile
    ports:
      - "8003:8003"

  yandexmarket-parser:
    build:
      context: ./parsers
      dockerfile: yandexmarket/Dockerfile
    ports:
      - "8004:8004"

  frontend:
    build: ./frontend
    ports:
      - "3000:3000"
    depends_on:
      - api-gateway 